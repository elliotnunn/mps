		include	'traps.a'
		include	'quickequ.a'
;
;	Apple Macintosh Developer Technical Support
;
;	Copyright Â© 1989-1991 Apple Computer, Inc.
;	All rights reserved.
;
;	Originally from:  TESample, by Bryan Stearns
;	Modified by:      Eric Soldan
;
;	AsmTEClikLoop
;
;	This routine gets called by the TextEdit Manager from TEClick.
;	It calls the old, default click loop routine that scrolls the
;	text, and then calls our own Pascal routine that handles
;	tracking the scroll bars to follow along.  It doesn't bother
;	with saving registers A0 and D0, because they are trashed
;	anyway by TextEdit.
;

		case	on

		seg	'Controls'
ASMTECLIKLOOP	proc	export
		import	gDefaultClikLoopUPP:DATA
		import	CTEClikLoop

		movem.l	D1-D2/A1,-(SP)	;D0 and A0 need not be saved.

		movea.l	gDefaultClikLoopUPP,A0
		jsr	(A0)		;Execute TextEdit's default clikLoop.

		movem.l	(SP)+,D1-D2/A1	; restore the world as it was
		movem.l	D1-D2/A1,-(SP)	;D0 and A0 need not be saved.

		jsr	CTEClikLoop

		movem.l	(SP)+,D1-D2/A1	; restore the world as it was
		moveq	#1,D0		; clear the zero flag so TextEdit keeps going
		rts

		ENDP

************

ASMNOCARET	PROC	EXPORT
		move.l	(A7)+,D0
		rts

		ENDP

************

		END 

